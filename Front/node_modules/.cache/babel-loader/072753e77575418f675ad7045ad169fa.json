{"ast":null,"code":"/**\r\n * Parse profile.\r\n *\r\n * @param {Object|String} json\r\n * @return {Object}\r\n * @api private\r\n */\nexports.parse = function (json) {\n  if ('string' == typeof json) {\n    json = JSON.parse(json);\n  }\n\n  var profile = {};\n  profile.id = json.id;\n  profile.username = json.screen_name;\n  profile.displayName = json.first_name + ' ' + json.last_name;\n  profile.name = {\n    familyName: json.last_name,\n    givenName: json.first_name\n  };\n\n  if (json.nickname) {\n    profile.name.middleName = json.nickname;\n  }\n\n  if (json.sex) {\n    profile.gender = json.sex == 1 ? 'female' : 'male';\n  }\n\n  var sex = json.sex;\n  profile.gender = sex == 1 ? 'female' : sex == 2 ? 'male' : void 1;\n  profile.profileUrl = 'http://vk.com/' + json.screen_name;\n  profile.photos = [];\n\n  for (var key in json) {\n    if (key.indexOf('photo') !== 0) continue;\n    profile.photos.push({\n      value: json[key],\n      type: key\n    });\n  }\n\n  var bdate = /^(\\d+)\\.(\\d+)\\.(\\d+)$/.exec(json.bdate);\n\n  if (bdate) {\n    var year = bdate[3],\n        month = (bdate[2].length < 2 ? '0' : '') + bdate[2],\n        day = (bdate[1].length < 2 ? '0' : '') + bdate[1];\n    profile.birthday = year + '-' + month + '-' + day;\n  }\n\n  return profile;\n};","map":null,"metadata":{},"sourceType":"script"}